<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Credit Suisse – Demo</title>
<style>
body{font-family:Arial;background:#f4f6f8;margin:0}
.hidden{display:none}
.panel{background:#fff;padding:20px;margin:20px;border-radius:6px}
button{background:#00205b;color:#fff;border:none;padding:10px 16px;border-radius:4px;cursor:pointer}
input,select{width:100%;padding:8px;margin:6px 0}
footer{background:#00205b;color:#fff;padding:14px}
.modal-bg{position:fixed;inset:0;background:rgba(0,0,0,.5);display:flex;align-items:center;justify-content:center}
.modal{background:#fff;padding:20px;width:360px;border-radius:6px}
</style>
</head>

<body>

<div id="loginPanel" class="panel">
  <h2>Login</h2>
  <input id="user">
  <input id="pass" type="password">
  <button onclick="doLogin()">Login</button>
</div>

<div id="otpPanel" class="panel hidden">
  <h2>Security Verification</h2>
  <input id="otp">
  <button onclick="verifyOTP()">Verify</button>
</div>

<div id="dashboard" class="hidden">
  <div class="panel">
    <h2>Account Overview</h2>
    <div>Balance: CHF <span id="balance">125430.55</span></div>
    <button onclick="showPayments()">Make a Transfer</button>
  </div>

  <div id="payments" class="panel hidden">
    <h3>Transfer</h3>
    <input id="ben" placeholder="Beneficiary">
    <input id="amount" type="number" placeholder="Amount">
    <input id="cot" placeholder="COT Code">
    <button onclick="confirmTransfer()">Confirm</button>
  </div>

  <div class="panel">
    <h3>News</h3>
    <div id="news"></div>
  </div>
</div>

<footer>© Credit Suisse Group AG – Demo</footer>

<div id="modal" class="modal-bg hidden">
  <div class="modal">
    <h3>Transfer Successful</h3>
    <p id="modalText"></p>
    <button onclick="printReceipt()">Print Receipt</button>
    <button onclick="closeModal()">OK</button>
  </div>
</div>

<script>
const eu=btoa("demoUser");
const ep=btoa("demoPass");
const elog=btoa("739201");
const ecot=btoa("COT-884219");

let otpTries=0,cotTries=0,balance=125430.55,lastReceipt={};

const newsItems=[
"Swiss Market Index rises","UBS expands wealth services","CHF steady vs EUR",
"European banks gain","Defensive assets favored","Private banking inflows rise"
];
let newsIndex=0;

const newsDiv=document.getElementById("news");
newsDiv.innerText=newsItems[0];
setInterval(()=>newsDiv.innerText=newsItems[++newsIndex%newsItems.length],8000);

function doLogin(){
  if(btoa(user.value)===eu && btoa(pass.value)===ep){
    setTimeout(()=>{
      loginPanel.classList.add("hidden");
      otpPanel.classList.remove("hidden");
    },700);
  } else alert("Invalid credentials");
}

function verifyOTP(){
  if(++otpTries>3) return alert("Maximum attempts reached.");
  setTimeout(()=>{
    if(btoa(otp.value)===elog){
      otpPanel.classList.add("hidden");
      dashboard.classList.remove("hidden");
    } else alert("Invalid code");
  },700);
}

function showPayments(){
  payments.classList.remove("hidden");
}

function confirmTransfer(){
  if(++cotTries>3) return alert("Maximum attempts reached.");
  const amt=parseFloat(amount.value);
  if(!amt||amt<=0) return alert("Invalid amount");

  setTimeout(()=>{
    if(btoa(cot.value)!==ecot) return alert("Invalid COT");
    balance-=amt;
    document.getElementById("balance").innerText=balance.toFixed(2);
    lastReceipt={amt,ben:ben.value,ref:"CS-TX-"+Math.floor(Math.random()*999999)};
    modalText.innerHTML=`Reference: ${lastReceipt.ref}<br>Amount: CHF ${amt.toFixed(2)}`;
    modal.classList.remove("hidden");
  },900);
}

function closeModal(){modal.classList.add("hidden")}
function printReceipt(){
  const w=window.open();
  w.document.write(`<h2>Credit Suisse Receipt</h2>
  <p>${lastReceipt.ref}</p>
  <p>${lastReceipt.ben}</p>
  <p>CHF ${lastReceipt.amt.toFixed(2)}</p>`);
  w.print();
}
</script>

</body>
</html>
